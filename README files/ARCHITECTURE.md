# ğŸ—ï¸ Memorie - System Architecture

## ğŸ¯ High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER                                â”‚
â”‚                      (Web Browser)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ HTTPS
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   NEXT.JS 14 APP                            â”‚
â”‚                   (App Router)                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Client     â”‚  â”‚  Server      â”‚  â”‚  API Routes  â”‚       â”‚
â”‚  â”‚  Components  â”‚â—„â”€â”¤  Components  â”‚â—„â”€â”¤  (Actions)   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â”‚                                     â”‚             â”‚
â”‚         â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Middleware  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                    â”‚ (Auth Guard)â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚          â”‚          â”‚          â”‚          â”‚
             â–¼          â–¼          â–¼          â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Supabase  â”‚ â”‚  Groq  â”‚ â”‚ Crypto â”‚ â”‚  PWA   â”‚ â”‚ Web    â”‚
    â”‚  Database  â”‚ â”‚   AI   â”‚ â”‚  AES   â”‚ â”‚Service â”‚ â”‚ Push   â”‚
    â”‚  + Auth    â”‚ â”‚  NLP   â”‚ â”‚  256   â”‚ â”‚Worker  â”‚ â”‚  API   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Architecture

### 1ï¸âƒ£ User Input Flow

```
User types in chat
        â”‚
        â–¼
[ChatInterface Component]
        â”‚
        â–¼
[Client-side validation]
        â”‚
        â–¼
[API Route: /api/chat]
        â”‚
        â”œâ”€â”€â–º [Groq API] â”€â”€â–º Intent Classification
        â”‚                         â”‚
        â”‚                         â–¼
        â”‚                   Confidence > 70%?
        â”‚                         â”‚
        â”‚                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
        â”‚                    â”‚         â”‚
        â”‚                   Yes        No
        â”‚                    â”‚         â”‚
        â”‚                    â–¼         â–¼
        â”‚            [Route Intent] [Ask Clarification]
        â”‚                    â”‚
        â”‚                    â–¼
        â”œâ”€â”€â–º [Execute Action]
        â”‚         â”‚
        â”‚         â”œâ”€â”€â–º Create Reminder
        â”‚         â”œâ”€â”€â–º Add Todo
        â”‚         â”œâ”€â”€â–º Save Note
        â”‚         â”œâ”€â”€â–º Store Password (encrypted)
        â”‚         â””â”€â”€â–º Upload Document
        â”‚
        â–¼
[Supabase Database]
        â”‚
        â–¼
[Log Activity]
        â”‚
        â–¼
[Return Response]
        â”‚
        â–¼
[Update UI]
```

---

## ğŸ” Security Architecture

### Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Click "Sign in with Google"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Auth      â”‚
â”‚  (OAuth Provider)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Redirect to Google
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Google OAuth       â”‚
â”‚  Consent Screen     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ User approves
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Callback Handler   â”‚
â”‚  /auth/callback     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Exchange code for session
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create/Update User â”‚
â”‚  in Database        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redirect to        â”‚
â”‚  /dashboard         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Row Level Security (RLS)

```
Every Database Query
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Middleware Check   â”‚
â”‚  auth.uid() exists? â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â–º No  â”€â”€â–º Redirect to Login
       â”‚
       â””â”€â”€â–º Yes â”€â”€â–º Continue
                     â”‚
                     â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Supabase Query      â”‚
          â”‚  WITH RLS Policy     â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Policy Check:       â”‚
          â”‚  user_id = auth.uid()â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â”€â–º Match â”€â”€â–º Return Data
                 â”‚
                 â””â”€â”€â–º No Match â”€â”€â–º Return Empty
```

---

## ğŸ§  AI/NLP Pipeline

### Intent Classification System

```
User Input: "Remind me to call John tomorrow at 3pm"
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Groq API (Mixtral-8x7b-32768)            â”‚
â”‚                                            â”‚
â”‚  System Prompt:                           â”‚
â”‚  - Define available intents               â”‚
â”‚  - Define entity extraction rules         â”‚
â”‚  - Set confidence threshold (0.7)         â”‚
â”‚  - Request JSON response                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Response (JSON):                       â”‚
â”‚  {                                         â”‚
â”‚    "intent": "create_reminder",           â”‚
â”‚    "entities": {                          â”‚
â”‚      "person": "John",                    â”‚
â”‚      "action": "call",                    â”‚
â”‚      "datetime": "2025-10-19T15:00:00Z"   â”‚
â”‚    },                                      â”‚
â”‚    "confidence": 0.92                     â”‚
â”‚  }                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
     Confidence >= 0.7?
             â”‚
        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
        â”‚         â”‚
       Yes        No
        â”‚         â”‚
        â–¼         â–¼
   [Execute]  [Request Clarification]
        â”‚
        â–¼
[Create Reminder in Database]
        â”‚
        â–¼
[Schedule Push Notification]
        â”‚
        â–¼
[Generate Response]
        â”‚
        â–¼
[Return to User: "I'll remind you to call John tomorrow at 3pm"]
```

---

## ğŸ”’ Encryption Architecture

### Vault Data Encryption Flow

```
User Input: Save password for "Netflix"
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client Side (Browser)                     â”‚
â”‚                                            â”‚
â”‚  Plaintext Data:                          â”‚
â”‚  {                                         â”‚
â”‚    "username": "user@email.com",          â”‚
â”‚    "password": "MySecretPass123",         â”‚
â”‚    "url": "netflix.com",                  â”‚
â”‚    "notes": "Family account"              â”‚
â”‚  }                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server Side (API Route)                   â”‚
â”‚                                            â”‚
â”‚  1. Get ENCRYPTION_SECRET from env        â”‚
â”‚  2. JSON.stringify(data)                  â”‚
â”‚  3. AES-256 Encrypt with CryptoJS         â”‚
â”‚                                            â”‚
â”‚  Result: "U2FsdGVkX1+3xR7..."            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Database                         â”‚
â”‚                                            â”‚
â”‚  vault table:                             â”‚
â”‚  - id: uuid                               â”‚
â”‚  - user_id: uuid (RLS protected)          â”‚
â”‚  - label: "Netflix"                       â”‚
â”‚  - data_encrypted: "U2FsdGVkX1+3xR7..."  â”‚
â”‚  - category: "password"                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    [RLS Policy Ensures]
    [Only owner can access]

When Reading:
    1. Query vault with user_id
    2. Get encrypted string
    3. Decrypt with ENCRYPTION_SECRET
    4. Return plaintext to owner only
```

---

## ğŸ“± PWA Architecture

### Service Worker Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Service Worker (sw.js)                    â”‚
â”‚  Generated by next-pwa                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€â–º Strategy 1: NetworkFirst
             â”‚    (Supabase API calls)
             â”‚    â€¢ Try network
             â”‚    â€¢ Fallback to cache
             â”‚    â€¢ Cache response for later
             â”‚
             â”œâ”€â”€â–º Strategy 2: CacheFirst
             â”‚    (Static assets)
             â”‚    â€¢ Check cache first
             â”‚    â€¢ Network if not cached
             â”‚
             â”œâ”€â”€â–º Strategy 3: NetworkOnly
             â”‚    (Groq API)
             â”‚    â€¢ Always fetch fresh
             â”‚    â€¢ No caching
             â”‚
             â””â”€â”€â–º Strategy 4: StaleWhileRevalidate
                  (Chat history)
                  â€¢ Return cached immediately
                  â€¢ Update in background
```

### Offline Functionality

```
User Offline?
      â”‚
      â”œâ”€â”€â–º Yes â”€â”€â–º Check Service Worker Cache
      â”‚                     â”‚
      â”‚                     â”œâ”€â”€â–º Recent Chats âœ“
      â”‚                     â”œâ”€â”€â–º Notes âœ“
      â”‚                     â”œâ”€â”€â–º Reminders âœ“
      â”‚                     â”œâ”€â”€â–º UI Assets âœ“
      â”‚                     â””â”€â”€â–º Show offline indicator
      â”‚
      â””â”€â”€â–º No â”€â”€â–º Normal operation
                   â”‚
                   â””â”€â”€â–º Sync changes when back online
```

---

## ğŸ”” Notification System

### Web Push Flow

```
User grants permission
        â”‚
        â–¼
[Subscribe to Push Manager]
        â”‚
        â–¼
[Get PushSubscription object]
        â”‚
        â–¼
[Save to user preferences in DB]
        â”‚
        â–¼
---Reminder time arrives---
        â”‚
        â–¼
[Supabase Edge Function triggers]
        â”‚
        â–¼
[Load user's push subscription]
        â”‚
        â–¼
[web-push.sendNotification()]
        â”‚
        â–¼
[Browser receives push event]
        â”‚
        â–¼
[Service Worker handles]
        â”‚
        â–¼
[Show notification UI]
        â”‚
        â–¼
[User clicks notification]
        â”‚
        â–¼
[Open app to reminder detail]
```

---

## ğŸ“¦ Module Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PRESENTATION LAYER                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  React Components (Client-Side)     â”‚   â”‚
â”‚  â”‚  - ChatInterface                    â”‚   â”‚
â”‚  â”‚  - ReminderList                     â”‚   â”‚
â”‚  â”‚  - TodoManager                      â”‚   â”‚
â”‚  â”‚  - VaultUI                          â”‚   â”‚
â”‚  â”‚  - NoteEditor                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           APPLICATION LAYER                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Next.js API Routes & Actions       â”‚   â”‚
â”‚  â”‚  - /api/chat                        â”‚   â”‚
â”‚  â”‚  - /api/reminders                   â”‚   â”‚
â”‚  â”‚  - /api/todos                       â”‚   â”‚
â”‚  â”‚  - /api/vault                       â”‚   â”‚
â”‚  â”‚  - /api/notes                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           BUSINESS LOGIC LAYER              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Core Services                      â”‚   â”‚
â”‚  â”‚  - groq/ (AI/NLP)                   â”‚   â”‚
â”‚  â”‚  - encryption/ (Security)           â”‚   â”‚
â”‚  â”‚  - notifications/ (Push)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DATA ACCESS LAYER                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Supabase Queries                   â”‚   â”‚
â”‚  â”‚  - queries.ts (CRUD operations)     â”‚   â”‚
â”‚  â”‚  - client.ts (connections)          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           DATABASE LAYER                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Supabase PostgreSQL                â”‚   â”‚
â”‚  â”‚  - users                            â”‚   â”‚
â”‚  â”‚  - chats                            â”‚   â”‚
â”‚  â”‚  - reminders                        â”‚   â”‚
â”‚  â”‚  - todos                            â”‚   â”‚
â”‚  â”‚  - vault                            â”‚   â”‚
â”‚  â”‚  - notes                            â”‚   â”‚
â”‚  â”‚  - documents                        â”‚   â”‚
â”‚  â”‚  - activity_log                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer Machine (You)          â”‚
â”‚  - Edit code                      â”‚
â”‚  - Test locally                   â”‚
â”‚  - Commit to Git                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ git push
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Repository                â”‚
â”‚  - Source code                    â”‚
â”‚  - Version control                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ Webhook trigger
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vercel (Automatic Deployment)    â”‚
â”‚  - Build Next.js app              â”‚
â”‚  - Deploy to Edge Network         â”‚
â”‚  - Set environment variables      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€â–º Edge Functions (API Routes)
             â”‚    - Distributed globally
             â”‚    - Auto-scaling
             â”‚
             â””â”€â”€â–º Static Assets (CDN)
                  - Images, CSS, JS
                  - Cached worldwide

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase (Database & Auth)       â”‚
â”‚  - PostgreSQL database            â”‚
â”‚  - Authentication service         â”‚
â”‚  - Storage buckets                â”‚
â”‚  - Edge functions                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Groq (AI/NLP Service)            â”‚
â”‚  - Intent classification          â”‚
â”‚  - Entity extraction              â”‚
â”‚  - Response generation            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Requests
      â”‚
      â–¼
[Vercel Edge (closest location)]
      â”‚
      â”œâ”€â”€â–º API Routes â”€â”€â–º Supabase
      â”‚                   â””â”€â”€â–º Database queries
      â”‚
      â”œâ”€â”€â–º Static Content â”€â”€â–º CDN Cache
      â”‚
      â””â”€â”€â–º AI Features â”€â”€â–º Groq API
```

---

## ğŸ¯ System Capabilities

### âœ… What the System Can Do:

1. **Understand Natural Language** (90% accuracy target)
   - Intent classification
   - Entity extraction
   - Context awareness
   - Confidence scoring

2. **Manage Personal Data**
   - Reminders with notifications
   - Todo lists with priorities
   - Secure password storage
   - Note organization
   - Document management

3. **Learn and Remember**
   - Conversation history
   - User preferences
   - Activity patterns
   - Custom fields

4. **Stay Secure**
   - OAuth authentication
   - Row-level security
   - AES-256 encryption
   - HTTPS only

5. **Work Offline**
   - Service worker caching
   - Local data sync
   - Queue operations
   - Background sync

6. **Notify Intelligently**
   - Web push notifications
   - Time-based triggers
   - Custom schedules
   - Action buttons

---

## ğŸ“Š Performance Characteristics

- **First Load:** < 3 seconds
- **Time to Interactive:** < 2 seconds
- **API Response Time:** < 500ms average
- **Database Queries:** < 100ms average
- **AI Classification:** < 2 seconds
- **Offline Support:** 100% for cached content

---

## ğŸ”„ Scalability Plan

```
Users: 1-100
â””â”€â”€â–º Single Supabase instance
     â””â”€â”€â–º Vercel Hobby plan

Users: 100-1,000
â””â”€â”€â–º Supabase connection pooling
     â””â”€â”€â–º Vercel Pro plan
          â””â”€â”€â–º Edge caching enabled

Users: 1,000-10,000
â””â”€â”€â–º Supabase Pro plan
     â””â”€â”€â–º Vercel Team plan
          â””â”€â”€â–º CDN optimization
               â””â”€â”€â–º Database indexing

Users: 10,000+
â””â”€â”€â–º Supabase Enterprise
     â””â”€â”€â–º Vercel Enterprise
          â””â”€â”€â–º Read replicas
               â””â”€â”€â–º Redis caching
                    â””â”€â”€â–º Load balancing
```

---

This architecture provides:
- âœ… **Scalability:** From 1 to 100,000+ users
- âœ… **Security:** Multi-layer protection
- âœ… **Performance:** Edge-first design
- âœ… **Reliability:** Offline-first approach
- âœ… **Maintainability:** Modular structure
- âœ… **Cost-Efficiency:** Serverless where possible
